<?xml version="1.0"?>
<!-- Author: Guillermo Castillo
	 Email:  castillomartinez.2@osu.edu
     Date:   03/20/2020   -->
<robot name="digit" 
  xmlns:xacro="http://ros.org/wiki/xacro">
  
  <!-- Properties -->
  <xacro:property name="black_RGB" value="0.1 0.1 0.1 1" />
  <xacro:property name="grey_RGB" value="0.35 0.35 0.35 1" />
  <xacro:property name="orange_RGB" value=".9569 .5372 .2588 1" />
  <xacro:property name="blue_RGB" value=".0157 .1176 .2588 1" />
  <xacro:property name="maize_RGB" value=".9451 .7686 0 1" />
  <xacro:property name="light_grey_RGB" value="0.75 0.75 0.75 1" />
  <xacro:property name="scarlet_RGB" value="0.89 0.13 0.0 1" />


  <!-- Link Definitions-->
  <xacro:macro name="vectorNav">
    <link name="vectorNav">
      <inertial>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <mass value="0" />
                <inertia ixx="0" ixy="0" ixz="0" iyy="0" iyz="0" izz="0" />
      </inertial>
    </link>
  </xacro:macro>  

  <xacro:macro name="torso" params="cname color">
    <link name="torso">
      <inertial>
        <origin xyz="0.001637 0.0002 0.259547" rpy="0 0 0"/>
        <mass value="15.028392" />
		<inertia ixx="0.376284" ixy="-8.8e-05" ixz="0.008378" iyy="0.342655" iyz="6.7e-05" izz="0.100648" />
      </inertial>
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="package://digit_model/meshes/torso.stl"/>
        </geometry>
        <material name="${cname}">
          <color rgba="${color}" />
        </material>
      </visual>
    </link>
  </xacro:macro>

  <xacro:macro name="hip_roll" params="side cname color stl_ext reflect">
    <link name="${side}_hip_roll">
      <inertial>
        <origin xyz="-0.001967 ${reflect*0.000244} 0.031435" rpy="0 0 0"/>
        <mass value="0.915088" />
        <inertia ixx="0.001017" ixy="${reflect*(-3e-06)}" ixz="1.3e-05" iyy="0.001148" iyz="${reflect*(-4e-06)}" izz="0.000766" />
      </inertial>
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
	  <xacro:if value="${side == 'left'}">
            <mesh filename="package://digit_model/meshes/hip-yaw-housing.stl"/>
	  </xacro:if>
	  <xacro:if value="${side == 'right'}">
            <mesh filename="package://digit_model/meshes/hip-yaw-housing.stl" scale="1 -1 1"/>
	  </xacro:if>	
        </geometry>
        <material name="${cname}">
          <color rgba="${color}" />
        </material>
      </visual>
    </link>
  </xacro:macro>

  <xacro:macro name="hip_yaw" params="side cname color stl_ext reflect">
    <link name="${side}_hip_yaw">
      <inertial>
        <origin xyz="1e-05 ${reflect*-0.001945} 0.042033" rpy="0 0 0"/>
        <mass value="0.818753" />
        <inertia ixx="0.001627" ixy="${reflect*-1e-06}" ixz="2e-06" iyy="0.001929" iyz="${reflect*5.3e-05}" izz="0.00077" />
      </inertial>
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
	  <xacro:if value="${side == 'left'}">
            <mesh filename="package://digit_model/meshes/hip-pitch-housing.stl"/>
	  </xacro:if>
	  <xacro:if value="${side == 'right'}">
            <mesh filename="package://digit_model/meshes/hip-pitch-housing.stl" scale="1 -1 1"/>
	  </xacro:if>	
        </geometry>
        <material name="${cname}">
          <color rgba="${color}" />
        </material>
      </visual>
    </link>
  </xacro:macro>


  <xacro:macro name="hip_pitch" params="side cname color stl_ext reflect">
    <link name="${side}_hip_pitch">
      <inertial>
        <origin xyz="0.060537 ${reflect*0.000521} -0.038857" rpy="0 0 0"/>
        <mass value="6.244279" />
        <inertia ixx="0.011533" ixy="${reflect*-0.000171}" ixz="0.000148" iyy="0.033345" iyz="${reflect*0.000178}" izz="0.033958" />
      </inertial>
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
	  <xacro:if value="${side == 'left'}">
            <mesh filename="package://digit_model/meshes/hip-pitch.stl"/>
	  </xacro:if>
	  <xacro:if value="${side == 'right'}">
            <mesh filename="package://digit_model/meshes/hip-pitch.stl" scale="1 -1 1"/>
	  </xacro:if>	
        </geometry>
        <material name="${cname}">
          <color rgba="${color}" />
        </material>
      </visual>
    </link>
  </xacro:macro>

  <xacro:macro name="knee" params="side cname color stl_ext reflect">
    <link name="${side}_knee">
      <inertial>
        <origin xyz="0.045641 ${reflect*0.042154} 0.001657" rpy="0 0 0"/>
        <mass value="1.227077" />
        <inertia ixx="0.002643" ixy="${reflect*-0.001832}" ixz="6.6e-05" iyy="0.005098" iyz="${reflect*4.5e-05}" izz="0.007019" />
      </inertial>
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
	  <xacro:if value="${side == 'left'}">
            <mesh filename="package://digit_model/meshes/knee.stl"/>
	  </xacro:if>
	  <xacro:if value="${side == 'right'}">
            <mesh filename="package://digit_model/meshes/knee.stl" scale="1 -1 1"/>
	  </xacro:if>	
        </geometry>
        <material name="${cname}">
          <color rgba="${color}" />
        </material>
      </visual>
    </link>
  </xacro:macro>

  <xacro:macro name="shin" params="side cname color stl_ext reflect">
    <link name="${side}_shin">
      <inertial>
        <origin xyz="0.174265 ${reflect*0.010265} 0.00107" rpy="0 0 0"/>
        <mass value="0.895793" />
        <inertia ixx="0.001128" ixy="${reflect*0.001098}" ixz="0.000196" iyy="0.022492" iyz="${reflect*-3e-06}" izz="0.022793" />
      </inertial>
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
	  <xacro:if value="${side == 'left'}">
            <mesh filename="package://digit_model/meshes/shin.stl"/>
	  </xacro:if>
	  <xacro:if value="${side == 'right'}">
            <mesh filename="package://digit_model/meshes/shin.stl" scale="1 -1 1"/>
	  </xacro:if>	
        </geometry>
        <material name="${cname}">
          <color rgba="${color}" />
        </material>
      </visual>
    </link>
  </xacro:macro>

  <xacro:macro name="tarsus" params="side cname color stl_ext reflect">
    <link name="${side}_tarsus">
      <inertial>
        <origin xyz="0.000932 ${reflect*-0.029183} 0.000678" rpy="0 0 0"/>
        <mass value="1.322865" />
        <inertia ixx="0.000932" ixy="${reflect*0.00061}" ixz="0.000102" iyy="0.016409" iyz="${reflect*9e-06}" izz="0.016501" />
      </inertial>
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
	  <xacro:if value="${side == 'left'}">
            <mesh filename="package://digit_model/meshes/tarsus.stl"/>
	  </xacro:if>
	  <xacro:if value="${side == 'right'}">
            <mesh filename="package://digit_model/meshes/tarsus.stl" scale="1 -1 1"/>
	  </xacro:if>	
        </geometry>
        <material name="${cname}">
          <color rgba="${color}" />
        </material>
      </visual>
    </link>
  </xacro:macro>

  <xacro:macro name="toe_pitch" params="side cname color stl_ext reflect">
    <link name="${side}_toe_pitch">
      <inertial>
        <origin xyz="-0.000141 ${reflect*2e-06} 3e-06" rpy="0 0 0"/>
        <mass value="0.043881" />
        <inertia ixx="5e-06" ixy="${reflect*0}" ixz="0" iyy="8e-06" iyz="${reflect*0}" izz="5e-06" />
      </inertial>
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
	  <xacro:if value="${side == 'left'}">
            <mesh filename="package://digit_model/meshes/toe-pitch.stl"/>
	  </xacro:if>
	  <xacro:if value="${side == 'right'}">
            <mesh filename="package://digit_model/meshes/toe-pitch.stl" scale="1 -1 1"/>
	  </xacro:if>	
        </geometry>
        <material name="${cname}">
          <color rgba="${color}" />
        </material>
      </visual>
    </link>
  </xacro:macro>

  <xacro:macro name="toe_roll" params="side cname color stl_ext reflect">
    <link name="${side}_toe_roll">
      <inertial>
        <origin xyz="9e-06 ${reflect*-0.028084} -0.023204" rpy="0 0 0"/>
        <mass value="0.531283" />
        <inertia ixx="0.00187" ixy="${reflect*0}" ixz="0" iyy="0.001616" iyz="${reflect*0.000566}" izz="0.000843" />
      </inertial>
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
	  <xacro:if value="${side == 'left'}">
            <mesh filename="package://digit_model/meshes/toe-roll.stl"/>
	  </xacro:if>
	  <xacro:if value="${side == 'right'}">
            <mesh filename="package://digit_model/meshes/toe-roll.stl" scale="1 -1 1"/>
	  </xacro:if>	
        </geometry>
        <material name="${cname}">
          <color rgba="${color}" />
        </material>
      </visual>
    </link>
  </xacro:macro>

  <xacro:macro name="toe_roll" params="side cname color stl_ext reflect">
    <link name="${side}_toe_roll">
      <inertial>
        <origin xyz="9e-06 ${reflect*-0.028084} -0.023204" rpy="0 0 0"/>
        <mass value="0.531283" />
        <inertia ixx="0.00187" ixy="${reflect*0}" ixz="0" iyy="0.001616" iyz="${reflect*0.000566}" izz="0.000843" />
      </inertial>
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
	  <xacro:if value="${side == 'left'}">
            <mesh filename="package://digit_model/meshes/toe-roll.stl"/>
	  </xacro:if>
	  <xacro:if value="${side == 'right'}">
            <mesh filename="package://digit_model/meshes/toe-roll.stl" scale="1 -1 1"/>
	  </xacro:if>	
        </geometry>
        <material name="${cname}">
          <color rgba="${color}" />
        </material>
      </visual>
    </link>
  </xacro:macro>

 <xacro:macro name="toe_roll" params="side cname color stl_ext reflect">
    <link name="${side}_toe_roll">
      <inertial>
        <origin xyz="9e-06 ${reflect*-0.028084} -0.023204" rpy="0 0 0"/>
        <mass value="0.531283" />
        <inertia ixx="0.00187" ixy="${reflect*0}" ixz="0" iyy="0.001616" iyz="${reflect*0.000566}" izz="0.000843" />
      </inertial>
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
	  <xacro:if value="${side == 'left'}">
            <mesh filename="package://digit_model/meshes/toe-roll.stl"/>
	  </xacro:if>
	  <xacro:if value="${side == 'right'}">
            <mesh filename="package://digit_model/meshes/toe-roll.stl" scale="1 -1 1"/>
	  </xacro:if>	
        </geometry>
        <material name="${cname}">
          <color rgba="${color}" />
        </material>
      </visual>
    </link>
  </xacro:macro>


  <xacro:macro name="shoulder_roll" params="side cname color stl_ext reflect">
    <link name="${side}_shoulder_roll">
      <inertial>
        <origin xyz="9e-06 ${reflect*-0.003158} 0.023405" rpy="0 0 0"/>
        <mass value="0.535396" />
        <inertia ixx="0.000704" ixy="${reflect*1.4e-05}" ixz="1.2e-05" iyy="0.00075" iyz="${reflect*3.5e-05}" izz="0.000298" />
      </inertial>
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
	  <xacro:if value="${side == 'left'}">
            <mesh filename="package://digit_model/meshes/arm-L1.stl"/>
	  </xacro:if>
	  <xacro:if value="${side == 'right'}">
            <mesh filename="package://digit_model/meshes/arm-L1.stl" scale="1 -1 1"/>
	  </xacro:if>	
        </geometry>
        <material name="${cname}">
          <color rgba="${color}" />
        </material>
      </visual>
    </link>
  </xacro:macro>

  <xacro:macro name="shoulder_pitch" params="side cname color stl_ext reflect">
    <link name="${side}_shoulder_pitch">
      <inertial>
        <origin xyz="-4.2e-05 ${reflect*-0.061882} -0.073788" rpy="0 0 0"/>
        <mass value="1.440357" />
        <inertia ixx="0.006761" ixy="${reflect*-6e-06}" ixz="-3e-06" iyy="0.002087" iyz="${reflect*-0.002046}" izz="0.005778" />
      </inertial>
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
	  <xacro:if value="${side == 'left'}">
            <mesh filename="package://digit_model/meshes/arm-L2.stl"/>
	  </xacro:if>
	  <xacro:if value="${side == 'right'}">
            <mesh filename="package://digit_model/meshes/arm-L2.stl" scale="1 -1 1"/>
	  </xacro:if>	
        </geometry>
        <material name="${cname}">
          <color rgba="${color}" />
        </material>
      </visual>
    </link>
  </xacro:macro>

  <xacro:macro name="shoulder_yaw" params="side cname color stl_ext reflect">
    <link name="${side}_shoulder_yaw">
      <inertial>
        <origin xyz="-3e-05 ${reflect*-0.001937} 0.11407" rpy="0 0 0"/>
        <mass value="1.065387" />
        <inertia ixx="0.006967" ixy="${reflect*1e-06}" ixz="-1e-06" iyy="0.007003" iyz="${reflect*1.5e-05}" izz="0.000673" />
      </inertial>
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
	  <xacro:if value="${side == 'left'}">
            <mesh filename="package://digit_model/meshes/arm-L3.stl"/>
	  </xacro:if>
	  <xacro:if value="${side == 'right'}">
            <mesh filename="package://digit_model/meshes/arm-L3.stl" scale="1 -1 1"/>
	  </xacro:if>	
        </geometry>
        <material name="${cname}">
          <color rgba="${color}" />
        </material>
      </visual>
    </link>
  </xacro:macro>

  <xacro:macro name="elbow" params="side cname color stl_ext reflect">
    <link name="${side}_elbow">
      <inertial>
        <origin xyz="0.107996 ${reflect*-0.000521} -0.017765" rpy="0 0 0"/>
        <mass value="0.550582" />
        <inertia ixx="0.000476" ixy="${reflect*2.9e-05}" ixz="0.001403" iyy="0.009564" iyz="${reflect*1.5e-05}" izz="-9e-06" />
      </inertial>
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
	  <xacro:if value="${side == 'left'}">
            <mesh filename="package://digit_model/meshes/arm-L4.stl"/>
	  </xacro:if>
	  <xacro:if value="${side == 'right'}">
            <mesh filename="package://digit_model/meshes/arm-L4.stl" scale="1 -1 1"/>
	  </xacro:if>	
        </geometry>
        <material name="${cname}">
          <color rgba="${color}" />
        </material>
      </visual>
    </link>
  </xacro:macro> 

  <xacro:macro name="plane" params="cname color">
    <link name="plane">
      <inertial>
        <origin xyz="0.107996 0.0005 -0.017765" rpy="0 0 0"/>
        <mass value="0.1" />
        <inertia ixx="0.000476" ixy="2.9e-05" ixz="0.001403" iyy="0.009564" iyz="1.5e-05" izz="-9e-06" />
      </inertial>
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
	  <box size="0.24 0.24 0.01" />
        </geometry>
        <material name="${cname}">
          <color rgba="${color}" />
        </material>
      </visual>
    </link>
  </xacro:macro> 

  <xacro:macro name="dot" params="cname color">
    <link name="dot">
      <inertial>
        <origin xyz="0.107996 0.0005 -0.017765" rpy="0 0 0"/>
        <mass value="0.1" />
        <inertia ixx="0.000476" ixy="2.9e-05" ixz="0.001403" iyy="0.009564" iyz="1.5e-05" izz="-9e-06" />
      </inertial>
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
	  <sphere size="0.02" />
        </geometry>
        <material name="${cname}">
          <color rgba="${color}" />
        </material>
      </visual>
    </link>
  </xacro:macro> 

  <!-- Joint Definitions -->
  <xacro:macro name="fixed_torso_to_vectorNav">
    <joint name="fixed_torso_to_vectorNav" type="fixed">
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <parent link="torso" />
      <child link="vectorNav" />
    </joint>
  </xacro:macro>

  <xacro:macro name="hip_abduction" params="side reflect">
    <joint name="hip_abduction_${side}" type="continuous">
      <origin xyz="-0.001 ${reflect*0.091} 0" rpy="${reflect*pi/2} -1.1955506 ${reflect*-pi/2}"/>
      <axis xyz="0 0 1"/>
      <parent link="torso" />
      <child link="${side}_hip_roll" />
      <limit lower="-1.0472" upper="1.0472" effort="1.4" velocity="12.15" />  
    </joint>
  </xacro:macro>

  <xacro:macro name="hip_rotation" params="side">
    <joint name="hip_rotation_${side}" type="continuous">
      <origin xyz="-0.0505 0 0.044" rpy="0 ${-pi/2} 0"/>
      <axis xyz="0 0 1"/>
      <parent link="${side}_hip_roll" />
      <child link="${side}_hip_yaw" />
      <limit lower="-0.698132" upper="0.698132" effort="1.4" velocity="12.15" />	
    </joint>
  </xacro:macro>

  <xacro:macro name="hip_flexion" params="side reflect">
    <joint name="hip_flexion_${side}" type="continuous">
      <origin xyz="0 ${reflect*0.004} 0.068" rpy="${reflect*-pi/2} ${-pi/4} ${reflect*pi}"/>
      <axis xyz="0 0 -1"/>
      <parent link="${side}_hip_yaw" />
      <child link="${side}_hip_pitch" />
	  <xacro:if value="${side == 'left'}">
	    <limit lower="-1.0472" upper="${pi/2}" effort="12.5" velocity="8.5" />
	  </xacro:if>
	  <xacro:if value="${side == 'right'}">
	    <limit lower="${-pi/2}" upper="1.0472" effort="12.5" velocity="8.5" />
	  </xacro:if>	
    </joint>
  </xacro:macro>
  
  <xacro:macro name="knee_joint" params="side reflect">
    <joint name="knee_joint_${side}" type="continuous">
      <origin xyz="0.12 0 0.0045" rpy="0 0 ${reflect*-pi/2}"/>
      <axis xyz="0 0 1"/>
      <parent link="${side}_hip_pitch" />
      <child link="${side}_knee" />
	  <xacro:if value="${side == 'left'}">
	    <limit lower="-1.2392" upper="0.8727" effort="12.5" velocity="8.5085" />
	  </xacro:if>
	  <xacro:if value="${side == 'right'}">
	    <limit lower="-0.8727" upper="1.2392" effort="12.5" velocity="8.5085" />
	  </xacro:if>	 
    </joint>
  </xacro:macro>
  
  <xacro:macro name="knee_to_shin" params="side reflect">
    <joint name="knee_to_shin_${side}" type="continuous">
      <origin xyz="0.060677 ${reflect*0.047406} 0" rpy="0 0 0"/>
      <axis xyz="0 0 1"/>
      <parent link="${side}_knee" />
      <child link="${side}_shin" />
      <limit lower="-0.35" upper="0.35" effort="0" velocity="10" />
    </joint>
  </xacro:macro>

  <xacro:macro name="shin_to_tarsus" params="side reflect">
    <joint name="shin_to_tarsus_${side}" type="continuous">
      <origin xyz="0.434759 ${reflect*0.02} 0" rpy="0 0 ${reflect*1.7976891}"/>
      <axis xyz="0 0 1"/>
      <parent link="${side}_shin" />
      <child link="${side}_tarsus" />
	  <xacro:if value="${side == 'left'}">
	    <limit lower="-0.8779" upper="1.2497" effort="0" velocity="20" />
	  </xacro:if>
	  <xacro:if value="${side == 'right'}">
	    <limit lower="-1.2497" upper="0.8779" effort="0" velocity="20" />
	  </xacro:if>	 
    </joint>
  </xacro:macro>

  <xacro:macro name="toe_pitch_joint" params="side reflect">
    <joint name="toe_pitch_joint_${side}" type="continuous">
      <origin xyz="0.408 ${reflect*-0.04} 0" rpy="0 0 ${reflect*1.1956}"/>
      <axis xyz="0 0 1"/>
      <parent link="${side}_tarsus" />
      <child link="${side}_toe_pitch" />
      <limit lower="${-pi/4}" upper="${pi/4}" effort="0.9" velocity="11.5" />
    </joint>
  </xacro:macro>

  <xacro:macro name="toe_roll_joint" params="side">
    <joint name="toe_roll_joint_${side}" type="continuous">
      <origin xyz="0 0 0" rpy="0 ${pi/2} 0"/>
      <axis xyz="0 0 1"/>
      <parent link="${side}_toe_pitch" />
      <child link="${side}_toe_roll" />
      <limit lower="-0.6109" upper="0.6109" effort="0.9" velocity="11.5" />
    </joint>
  </xacro:macro>

  <xacro:macro name="shoulder_roll_joint" params="side reflect">
    <joint name="shoulder_roll_joint_${side}" type="continuous">
      <origin xyz="-0.001 ${reflect*0.12} 0.4" rpy="${reflect*-pi/2} -1.3962633 ${reflect*pi/2}"/>
      <axis xyz="0 0 1"/>
      <parent link="torso" />
      <child link="${side}_shoulder_roll" />
      <limit lower="-1.309" upper="1.309" effort="1.4" velocity="12.5" />  
    </joint>
  </xacro:macro>

  <xacro:macro name="shoulder_pitch_joint" params="side reflect">
    <joint name="shoulder_pitch_joint_${side}" type="continuous">
      <origin xyz="-0.00317 ${reflect*-0.011055} 0.0555" rpy="${reflect*pi/2} ${pi/4} ${reflect*-0.2792527}"/>
      <axis xyz="0 0 -1"/>
      <parent link="${side}_shoulder_roll" />
      <child link="${side}_shoulder_pitch" />
      <limit lower="-2.5307" upper="2.5307" effort="1.4" velocity="12.5" />  
    </joint>
  </xacro:macro>

  <xacro:macro name="shoulder_yaw_joint" params="side reflect">
    <joint name="shoulder_yaw_joint_${side}" type="continuous">
      <origin xyz="0 ${reflect*-0.165} -0.1" rpy="${reflect*pi/2} 0 0"/>
      <axis xyz="0 0 1"/>
      <parent link="${side}_shoulder_pitch" />
      <child link="${side}_shoulder_yaw" />
      <limit lower="-1.7453" upper="1.7453" effort="1.4" velocity="10" />  
    </joint>
  </xacro:macro>

  <xacro:macro name="elbow_joint" params="side reflect">
    <joint name="elbow_joint_${side}" type="continuous">
      <origin xyz="0 ${reflect*-0.0385} 0.185" rpy="${reflect*pi/2} -0.3926991 0"/>
      <axis xyz="0 0 1"/>
      <parent link="${side}_shoulder_yaw" />
      <child link="${side}_elbow" />
      <limit lower="-1.3526" upper="1.3526" effort="1.4" velocity="12.5" />  
    </joint>
  </xacro:macro>

  <xacro:macro name="ankle_to_plane" params="side reflect">
    <joint name="ankle_to_plane" type="continuous">
      <origin xyz="0 ${reflect*-0.0385} 0.185" rpy="${reflect*pi/2} -0.3926991 0"/>
      <axis xyz="0 0 1"/>
      <parent link="${side}_shoulder_yaw" />
      <child link="${side}_elbow" />
      <limit lower="-1.3526" upper="1.3526" effort="0" velocity="10" />  
    </joint>
  </xacro:macro>

  <xacro:macro name="ankle_to_dot" params="side reflect">
    <joint name="ankle_to_plane" type="continuous">
      <origin xyz="0 ${reflect*-0.0385} 0.185" rpy="${reflect*pi/2} -0.3926991 0"/>
      <axis xyz="0 0 1"/>
      <parent link="{side}_toe_pitch" />
      <child link="dot" />
      <limit lower="-1.3526" upper="1.3526" effort="0" velocity="12" />  
    </joint>
  </xacro:macro>


  <!-- Transmission Definitions -->
  <xacro:macro name="hip_abduction_trans" params="side">
    <transmission name="hip_abduction_trans_${side}" type="transmission_interface/SimpleTransmission">
	  <joint name="hip_abduction_${side}"/>
	  <actuator name="hip_abduction_motor_${side}"/>
	  <motorInertia>2.7e-05</motorInertia>
	  <mechanicalReduction>80</mechanicalReduction>
    </transmission>
  </xacro:macro>

  <xacro:macro name="hip_rotation_trans" params="side">
    <transmission name="hip_rotation_trans_${side}" type="transmission_interface/SimpleTransmission">
	  <joint name="hip_rotation_${side}"/>
	  <actuator name="hip_rotation_motor_${side}"/>
	  <motorInertia>2.7e-05</motorInertia>
	  <mechanicalReduction>50</mechanicalReduction>
    </transmission>
  </xacro:macro>

  <xacro:macro name="hip_flexion_trans" params="side">
    <transmission name="hip_flexion_trans_${side}" type="transmission_interface/SimpleTransmission">
	  <joint name="hip_flexion_${side}"/>
	  <actuator name="hip_flexion_motor_${side}"/>
	  <motorInertia>4.71e-04</motorInertia>
	  <mechanicalReduction>16</mechanicalReduction>
    </transmission>
  </xacro:macro>

  <xacro:macro name="knee_joint_trans" params="side">
    <transmission name="knee_joint_trans_${side}" type="transmission_interface/SimpleTransmission">
	  <joint name="knee_joint_${side}"/>
	  <actuator name="knee_joint_motor_${side}"/>
	  <motorInertia>4.71e-04</motorInertia>
	  <mechanicalReduction>16</mechanicalReduction>
    </transmission>
  </xacro:macro>

  <xacro:macro name="toe_pitch_joint_trans" params="side">
    <transmission name="toe_pitch_joint_trans_${side}" type="transmission_interface/SimpleTransmission">
	  <joint name="toe_pitch_joint_${side}"/>
	  <actuator name="toe_pitch_joint_motor_${side}"/>
	  <motorInertia>1.4e-05</motorInertia>
	  <mechanicalReduction>50</mechanicalReduction>
    </transmission>
  </xacro:macro>

  <xacro:macro name="toe_roll_joint_trans" params="side">
    <transmission name="toe_roll_joint_trans_${side}" type="transmission_interface/SimpleTransmission">
	  <joint name="toe_roll_joint_${side}"/>
	  <actuator name="toe_roll_joint_motor_${side}"/>
	  <motorInertia>1.4e-05</motorInertia>
	  <mechanicalReduction>50</mechanicalReduction>
    </transmission>
  </xacro:macro>

  <xacro:macro name="shoulder_roll_joint_trans" params="side">
    <transmission name="shoulder_roll_joint_trans_${side}" type="transmission_interface/SimpleTransmission">
	  <joint name="shoulder_roll_joint_${side}"/>
	  <actuator name="shoulder_roll_joint_motor_${side}"/>
	  <motorInertia>2.7e-05</motorInertia>
	  <mechanicalReduction>80</mechanicalReduction>
    </transmission>
  </xacro:macro>

  <xacro:macro name="shoulder_pitch_joint_trans" params="side">
    <transmission name="shoulder_pitch_joint_trans_${side}" type="transmission_interface/SimpleTransmission">
	  <joint name="shoulder_pitch_joint_${side}"/>
	  <actuator name="shoulder_pitch_joint_motor_${side}"/>
	  <motorInertia>2.7e-05</motorInertia>
	  <mechanicalReduction>80</mechanicalReduction>
    </transmission>
  </xacro:macro>

  <xacro:macro name="shoulder_yaw_joint_trans" params="side">
    <transmission name="shoulder_yaw_joint_trans_${side}" type="transmission_interface/SimpleTransmission">
	  <joint name="shoulder_yaw_joint_${side}"/>
	  <actuator name="shoulder_yaw_joint_motor_${side}"/>
	  <motorInertia>2.7e-05</motorInertia>
	  <mechanicalReduction>50</mechanicalReduction>
    </transmission>
  </xacro:macro>

  <xacro:macro name="elbow_joint_trans" params="side">
    <transmission name="elbow_joint_trans_${side}" type="transmission_interface/SimpleTransmission">
	  <joint name="elbow_joint_${side}"/>
	  <actuator name="elbow_joint_motor_${side}"/>
	  <motorInertia>2.7e-05</motorInertia>
	  <mechanicalReduction>80</mechanicalReduction>
    </transmission>
  </xacro:macro>

  <!-- Links -->
  <xacro:vectorNav />
  <xacro:torso cname="scarlet" color="${scarlet_RGB}" />
  <xacro:hip_roll side="left" cname="grey" color="${grey_RGB}" stl_ext="" reflect="1" />
  <xacro:hip_yaw side="left" cname="light_grey" color="${light_grey_RGB}" stl_ext="" reflect="1"/>
  <xacro:hip_pitch side="left" cname="scarlet" color="${scarlet_RGB}" stl_ext="" reflect="1"/>
  <xacro:knee side="left" cname="grey" color="${grey_RGB}" stl_ext="" reflect="1"/>
  <xacro:shin side="left" cname="scarlet" color="${scarlet_RGB}" stl_ext="" reflect="1"/>
  <xacro:tarsus side="left" cname="grey" color="${grey_RGB}" stl_ext="" reflect="1"/>
  <xacro:toe_pitch side="left" cname="light_grey" color="${light_grey_RGB}" stl_ext="" reflect="1"/>
  <xacro:toe_roll side="left" cname="light_grey" color="${light_grey_RGB}" stl_ext="" reflect="1"/>
  <xacro:shoulder_roll side="left" cname="grey" color="${grey_RGB}" stl_ext="" reflect="1" />
  <xacro:shoulder_pitch side="left" cname="scarlet" color="${scarlet_RGB}" stl_ext="" reflect="1" />
  <xacro:shoulder_yaw side="left" cname="grey" color="${grey_RGB}" stl_ext="" reflect="1" />
  <xacro:elbow side="left" cname="light_grey" color="${light_grey_RGB}" stl_ext="" reflect="1" />

  <xacro:hip_roll side="right" cname="grey" color="${grey_RGB}" stl_ext="" reflect="-1" />
  <xacro:hip_yaw side="right" cname="light_grey" color="${light_grey_RGB}" stl_ext="" reflect="-1"/>
  <xacro:hip_pitch side="right" cname="scarlet" color="${scarlet_RGB}" stl_ext="" reflect="-1"/>
  <xacro:knee side="right" cname="grey" color="${grey_RGB}" stl_ext="" reflect="-1"/>
  <xacro:shin side="right" cname="scarlet" color="${scarlet_RGB}" stl_ext="" reflect="-1"/>
  <xacro:tarsus side="right" cname="grey" color="${grey_RGB}" stl_ext="" reflect="-1"/>
  <xacro:toe_pitch side="right" cname="light_grey" color="${light_grey_RGB}" stl_ext="" reflect="-1"/>
  <xacro:toe_roll side="right" cname="light_grey" color="${light_grey_RGB}" stl_ext="" reflect="-1"/>
  <xacro:shoulder_roll side="right" cname="grey" color="${grey_RGB}" stl_ext="" reflect="-1" />
  <xacro:shoulder_pitch side="right" cname="scarlet" color="${scarlet_RGB}" stl_ext="" reflect="-1" />
  <xacro:shoulder_yaw side="right" cname="grey" color="${grey_RGB}" stl_ext="" reflect="-1" />
  <xacro:elbow side="right" cname="light_grey" color="${light_grey_RGB}" stl_ext="" reflect="-1" />


  <!-- Joints -->
  <xacro:fixed_torso_to_vectorNav />
  <xacro:hip_abduction side="left" reflect="1"/>
  <xacro:hip_rotation side="left"/>
  <xacro:hip_flexion side="left" reflect="1"/>
  <xacro:knee_joint side="left" reflect="1"/>
  <xacro:knee_to_shin side="left" reflect="1"/>
  <xacro:shin_to_tarsus side="left" reflect="1"/>
  <xacro:toe_pitch_joint side="left" reflect="1"/>
  <xacro:toe_roll_joint side="left"/>
  <xacro:shoulder_roll_joint side="left" reflect="1"/>
  <xacro:shoulder_pitch_joint side="left" reflect="1"/>
  <xacro:shoulder_yaw_joint side="left" reflect="1"/>
  <xacro:elbow_joint side="left" reflect="1"/>


  <xacro:hip_abduction side="right" reflect="-1"/>
  <xacro:hip_rotation side="right"/>
  <xacro:hip_flexion side="right" reflect="-1"/>
  <xacro:knee_joint side="right" reflect="-1"/>
  <xacro:knee_to_shin side="right" reflect="-1"/>
  <xacro:shin_to_tarsus side="right" reflect="-1"/>
  <xacro:toe_pitch_joint side="right" reflect="-1"/>
  <xacro:toe_roll_joint side="right"/>
  <xacro:shoulder_roll_joint side="right" reflect="-1"/>
  <xacro:shoulder_pitch_joint side="right" reflect="-1"/>
  <xacro:shoulder_yaw_joint side="right" reflect="-1"/>
  <xacro:elbow_joint side="right" reflect="-1"/>


  <!-- Transmissions -->
  <xacro:hip_abduction_trans side="left"/>
  <xacro:hip_rotation_trans side="left"/>
  <xacro:hip_flexion_trans side="left"/>
  <xacro:knee_joint_trans side="left"/>
  <xacro:toe_pitch_joint_trans side="left"/>  
  <xacro:toe_roll_joint_trans side="left"/>  
  <xacro:shoulder_roll_joint_trans side="left"/>  
  <xacro:shoulder_pitch_joint_trans side="left"/>  
  <xacro:shoulder_yaw_joint_trans side="left"/>  
  <xacro:elbow_joint_trans side="left"/>  

  <xacro:hip_abduction_trans side="right"/>
  <xacro:hip_rotation_trans side="right"/>
  <xacro:hip_flexion_trans side="right"/>
  <xacro:knee_joint_trans side="right"/>
  <xacro:toe_pitch_joint_trans side="right"/>  
  <xacro:toe_roll_joint_trans side="right"/>  
  <xacro:shoulder_roll_joint_trans side="right"/>  
  <xacro:shoulder_pitch_joint_trans side="right"/>  
  <xacro:shoulder_yaw_joint_trans side="right"/>  
  <xacro:elbow_joint_trans side="right"/> 
</robot>
